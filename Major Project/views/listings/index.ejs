<% layout("/layouts/boilerplate") %>

<h3>All listings</h3>
<!-- <form method="GET" action="/listings/new">
      <button>Create New Listing</button>
    </form> -->

<div class="row row-cols-lg-3 row-cols-md-2 row-cols-sm-1 g-4">
  <% for (let listing of allListings) { %>
  <a href="/listings/<%= listing._id%>" class="listing-link">
    <div class="col">
      <div class="card h-100 listing-card">

<img
  src="<%= listing.image.url %>"
  class="card-img-top show-img"
  alt="listing_image"
  onerror="this.style.visibility='hidden'"
>


        <!-- <img
          src="<%= listing.image.url %>"
          class="card-img-top"
          alt="listing-image"
        /> -->

        <div class="card-img-overlay">
          <h5 class="card-title">Details</h5>
          <p class="card-text"><%=listing.description%></p>
          <!-- <p class="card-text"><small>Last updated 3 mins ago</small></p> -->
        </div>

        <div class="card-body">
          <p class="card-text">
            <b><%= listing.title %></b><br />
            &#8377; <%= typeof listing.price === "number" ?
            listing.price.toLocaleString("en-IN") : "Price not available" %>
            /night
          </p>
          <!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
        </div>
      </div>
    </div>
  </a>
  <% } %>
</div>
